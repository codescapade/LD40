{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/baseSprite.ts","src/boot.ts","src/game.ts","src/generator.ts","src/globals.ts","src/main.ts","src/preload.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Globals from './globals';\n\nexport default class BaseSprite extends Phaser.Sprite {\n  private _gridPosition:Phaser.Point;\n\n  constructor (game:Phaser.Game, gridX:number, gridY:number, spriteName:string ) {\n    let worldPos:Phaser.Point = Globals.toWorld(gridX, gridY);\n    super(game, worldPos.x, worldPos.y, spriteName);\n    this.anchor.set(0.5, 0.5);\n    this.game.add.existing(this);\n    this._gridPosition = new Phaser.Point(gridX, gridY);\n  }\n\n  updatePosition (gridX:number, gridY:number):void {\n    this.gridPosition.set(gridX, gridY);\n    let worldPos = Globals.toWorld(gridX, gridY);\n    this.position.set(worldPos.x, worldPos.y);\n  }\n  get gridPosition ():Phaser.Point {\n    return this._gridPosition;\n  }\n}\n","import Globals from './globals';\n\nexport default class Boot extends Phaser.State {\n  public preload ():void {\n    this.stage.disableVisibilityChange = false;\n    this.stage.smoothed = false;\n    this.scale.pageAlignHorizontally = true;\n    this.scale.pageAlignVertically = true;\n\n    Phaser.Canvas.setImageRenderingCrisp(this.game.canvas);\n\n    this.time.advancedTiming = true;\n\n    Globals.seed = this.rnd.between(0, 9999999999);\n    this.rnd.sow([Globals.seed.toString()]);\n\n  } // preload\n  \n  public create ():void {\n    this.game.state.start('preload');\n\n  } // create\n\n} // Boot\n","import Globals from './globals';\nimport BaseSprite from './baseSprite';\nimport Generator from './generator';\n\nexport default class Game extends Phaser.State {\n  private _snake:BaseSprite;\n  private _timer:number = 0;\n  private _delay:number = 250;\n\n  private _leftKey:Phaser.Key;\n  private _rightKey:Phaser.Key;\n  private _upKey:Phaser.Key;\n  private _downKey:Phaser.Key;\n\n  private _desiredRotation:number = 0;\n  private _desiredDirection:Phaser.Point = new Phaser.Point(1, 0);\n  private _currentDirection:Phaser.Point = new Phaser.Point(1, 0);\n\n  private _bodyGroup:Phaser.Group;\n  private _body:BaseSprite[];\n  private _food:BaseSprite;\n\n  private _map:Phaser.Tilemap;\n  private _mapLayer:Phaser.TilemapLayer;\n\n  public create ():void {\n\n    let gen:Generator = new Generator(this.game, 40, 30);\n    let mapCSV:string = gen.buildMap(20, 4, 8, 4, 8);\n    this.load.tilemap('map', null, mapCSV, Phaser.Tilemap.CSV);\n    this._map = this.add.tilemap('map', Globals.TILESIZE, Globals.TILESIZE);\n    this._map.addTilesetImage('tiles');\n\n    this._mapLayer = this._map.createLayer(0);\n    this._mapLayer.resizeWorld();\n\n    this.createSnake();\n\n    this._food = new BaseSprite(this.game, 0, 0, 'food');\n    this.updateFood();\n\n    this.game.camera.follow(this._snake, Phaser.Camera.FOLLOW_TOPDOWN_TIGHT);\n\n    this._leftKey = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT);\n    this._rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT);\n    this._upKey = this.game.input.keyboard.addKey(Phaser.Keyboard.UP);\n    this._downKey = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN);\n\n  } // create\n\n  public update ():void {\n    if (this._leftKey.justDown) {\n      this._desiredDirection.set(-1, 0);\n      this._desiredRotation = 180;\n    } else if (this._rightKey.justDown) {\n      this._desiredDirection.set(1, 0);\n      this._desiredRotation = 0;\n    } else if (this._upKey.justDown) {\n      this._desiredDirection.set(0, -1);\n      this._desiredRotation = 270;\n    } else if (this._downKey.justDown) {\n      this._desiredDirection.set(0, 1);\n      this._desiredRotation = 90;\n    }\n\n    if (this._timer < this._delay) {\n      this._timer += this.time.elapsed;\n    } else {\n      this._timer = 0;\n      this.updateSnake();\n    }\n    \n  } // update\n\n  public render ():void {\n    this.game.debug.text(this.time.fps.toString() || '--', 3, 14, '#00ff00');\n\n  } // render\n\n  private createSnake ():void {\n    let snakePos:Phaser.Point = new Phaser.Point();\n    let foundPos:boolean = false;\n    let rndX:number;\n    let rndY:number;\n    while (!foundPos) {\n      rndX = this.game.rnd.between(0, this._map.width - 1);\n      rndY = this.game.rnd.between(0, this._map.height - 1);\n      \n      if ((rndX - 3) >= 0 && (rndX + 3) < this._map.width - 1) {\n        foundPos = true;\n        for (let i = (rndX - 3); i <= (rndX + 3); i++) {\n          if (this._map.getTile(i, rndY, 0).index != 0) {\n            foundPos = false;\n            break;\n          }\n        }\n      }\n    }\n    this._snake = new BaseSprite(this.game, rndX, rndY, 'head');\n    this._bodyGroup = this.add.group();\n    this._bodyGroup.classType = BaseSprite;\n    for (let i = 0; i < 100; i++) {\n      let part:BaseSprite = new BaseSprite(this.game, 0, 0, 'body');\n      part.kill();\n      this._bodyGroup.add(part);\n    }\n\n    let snakeGridPos:Phaser.Point = this._snake.gridPosition;\n    this._body = [];\n    for (let i = 1; i < 3; i++) {\n      let bodyPart:BaseSprite = this._bodyGroup.getFirstExists(false);\n      bodyPart.revive();\n      bodyPart.updatePosition(snakeGridPos.x - i, snakeGridPos.y);\n      this._body.push(bodyPart);\n    }\n  }\n\n  private updateSnake ():void {\n    let difference = Phaser.Point.add(this._desiredDirection, this._currentDirection);\n    if (difference.x != 0 || difference.y != 0) {\n      this._currentDirection = this._desiredDirection.clone();\n      this._snake.angle = this._desiredRotation;\n    }\n\n    let oldPos:Phaser.Point = this._snake.gridPosition.clone();\n\n    let newX:number = oldPos.x + this._currentDirection.x;\n    let newY:number = oldPos.y + this._currentDirection.y;\n    if (this._map.getTile(newX, newY, 0).index != 0) {\n      return;\n    }\n\n    let hitSelf:boolean = false;\n    for (let i = 0; i < this._body.length; i++) {\n      let body:BaseSprite = this._body[i];\n      if (body.gridPosition.x == newX && body.gridPosition.y == newY) {\n        hitSelf = true;\n        break;\n      }\n    }\n    if (hitSelf) {\n      return;\n    }\n\n    this._snake.updatePosition(newX, newY);\n\n    if (this._food.gridPosition.equals(this._snake.gridPosition)) {\n      var newPart:BaseSprite = this._bodyGroup.getFirstExists(false);\n      newPart.revive();\n      newPart.updatePosition(oldPos.x, oldPos.y);\n      this._body.unshift(newPart);\n\n      this.updateFood();\n    } else {\n      var lastBodyPart:BaseSprite = this._body.pop();\n      lastBodyPart.updatePosition(oldPos.x, oldPos.y);\n      this._body.unshift(lastBodyPart);\n    }\n\n  } // updateSnake\n\n  private updateFood ():void {\n    let emptyPosition:boolean = false;\n    let rndX:number;\n    let rndY:number;\n    while (!emptyPosition) {\n      rndX = this.game.rnd.between(0, this._map.width - 1);\n      rndY = this.game.rnd.between(0, this._map.height - 1);\n\n      if (this._map.getTile(rndX, rndY, 0).index == 0) {\n        emptyPosition = true;\n        if (this._snake.gridPosition.x == rndX && this._snake.gridPosition.y == rndY) {\n          emptyPosition = false;\n        }\n        for (let i = 0; i < this._body.length; i++) {\n          let body:BaseSprite = this._body[i];\n          if (body.gridPosition.x == rndX && body.gridPosition.y == rndY) {\n            emptyPosition = false;\n            break;\n          }\n        }\n      }\n    }\n\n    this._food.updatePosition(rndX, rndY);\n  } // updateFood\n\n} // Game\n","\n\nexport default class Generator {\n  private _width:number;\n  private _height:number;\n  private _game:Phaser.Game;\n\n  private _map:number[][];\n\n  constructor(game:Phaser.Game, width:number, height:number) {\n    this._game = game;\n    this._width = width;\n    this._height = height;\n    this._map = [];\n\n    for (let y = 0; y < height; y++) {\n      let row:number[] = [];\n      for (let x = 0; x < width; x++) {\n        row.push(1);\n      }\n      this._map.push(row);\n    }\n\n  } // constructor\n\n  public buildMap (nrRooms:number, minSize:number, maxSize:number, minOverlap:number, maxOverlap:number):string {\n    let room:Phaser.Rectangle = this.getRndRoom(minSize, maxSize, true);\n    this.createRoom(room);\n\n    let totalRooms:number = 1;\n\n    let totalTries:number = 300;\n    let timesTried:number = 0;\n    let foundPlace:boolean = false;\n    while (totalRooms < nrRooms) {\n      timesTried = 0;\n      foundPlace = false;\n      while(!foundPlace && timesTried < totalTries) {\n        room = this.getRndRoom(minSize, maxSize, false);\n        let overlap:number = this.countTiles(room);\n        if (overlap >= minOverlap && overlap <= maxOverlap) {\n          foundPlace = true;\n          this.createRoom(room);\n        }\n        timesTried++;\n      }\n      totalRooms++;\n    }\n\n    this.removeDoubleWalls();\n\n    return this.getCSV();\n\n  } // buildMap\n\n  private getRndRoom (minSize:number, maxSize:number, firstRoom:boolean):Phaser.Rectangle {\n    let roomWidth:number = this._game.rnd.between(minSize, maxSize);\n    let roomHeight:number = this._game.rnd.between(minSize, maxSize);\n    let x:number;\n    let y:number;\n    if (firstRoom) {\n      x = Math.floor(this._width * 0.5 - roomWidth * 0.5);\n      y = Math.floor(this._height * 0.5 - roomHeight * 0.5);\n    } else {\n      x = this._game.rnd.between(1, this._width - roomWidth - 1);\n      y = this._game.rnd.between(1, this._height - roomHeight - 1);\n    }\n\n    return new Phaser.Rectangle(x, y, roomWidth, roomHeight);\n\n  } // getRndRoom\n\n  private countTiles (room:Phaser.Rectangle):number {\n    let count = 0;\n    for (let y = room.y; y < room.y + room.height; y++) {\n      for (let x = room.x; x < room.x + room.width; x++) {\n        if (this._map[y][x] == 0) {\n          count++;\n        }\n      }\n    }\n\n    return count;\n\n  } // countTiles\n\n  private createRoom (room:Phaser.Rectangle):void {\n    for (let y = room.y; y < room.y + room.height; y++) {\n      for (let x = room.x; x < room.x + room.width; x++) {\n        this._map[y][x] = 0;\n      }\n    }\n  } // createRoom\n\n  private allNeigborsAreWalls (x:number, y:number):boolean {\n    if (x - 1 >= 0 && y - 1 >= 0 && this._map[y - 1][x - 1] == 0) {\n      return false;\n    }\n\n    if (x - 1 >= 0 && this._map[y][x - 1] == 0) {\n      return false;\n    }\n\n    if (x - 1 >= 0 && y + 1 < this._height && this._map[y + 1][x - 1] == 0) {\n      return false;\n    }\n\n    if (y + 1 < this._height && this._map[y + 1][x] == 0) {\n      return false;\n    }\n\n    if (x + 1 < this._width && y + 1 < this._height && this._map[y + 1][x + 1] == 0) {\n      return false;\n    }\n\n    if (x + 1 < this._width && this._map[y][x + 1] == 0) {\n      return false;\n    }\n\n    if (x + 1 < this._width && y - 1 >= 0 && this._map[y - 1][x + 1] == 0) {\n      return false;\n    }\n\n    if (y - 1 >= 0 && this._map[y - 1][x] == 0) {\n      return false;\n    }\n\n    return true;\n\n  } // allNeighborsAreWalls\n\n  private removeDoubleWalls ():void {\n    let wallsToRemove:Phaser.Point[] = [];\n    for (let y = 0; y < this._height; y++) {\n      for (let x = 0; x < this._width; x++) {\n        if (this.allNeigborsAreWalls(x, y)) {\n          wallsToRemove.push(new Phaser.Point(x, y));\n        }\n      }\n    }\n\n    for (let i = 0; i < wallsToRemove.length; i++) {\n      let wallPos:Phaser.Point = wallsToRemove[i];\n      this._map[wallPos.y][wallPos.x] = 2;\n    }\n\n  } // remvoeDoubleWalls\n\n  private getCSV ():string {\n    let csvString:string = '';\n    for (let y = 0; y < this._height; y++) {\n      for (let x = 0; x < this._width; x++) {\n        csvString += this._map[y][x].toString();\n        csvString += ',';\n      }\n      csvString = csvString.replace(/,\\s*$/, '');\n      csvString += '\\n';\n    }\n\n    return csvString;\n\n  } // getCSV\n\n} // Generator\n","export default class Globals {\n  public static readonly TILESIZE:number = 20;\n  \n  public static seed:number = 0;\n\n  public static toGrid (x:number, y:number):Phaser.Point {\n    return new Phaser.Point(Math.floor(x / Globals.TILESIZE), Math.floor(y / Globals.TILESIZE));\n  }\n\n  public static toWorld (x:number, y:number):Phaser.Point {\n    return new Phaser.Point(x * Globals.TILESIZE + Globals.TILESIZE * 0.5,\n      y * Globals.TILESIZE + Globals.TILESIZE * 0.5);\n  }\n}\n","\nimport Boot from './boot';\nimport Preload from './preload';\nimport Game from './game';\n\nclass Main extends Phaser.Game {\n  public test: 'testing';\n\n  constructor () {\n    super(640, 480, Phaser.AUTO, 'container', null);\n\n    this.state.add('boot', Boot);\n    this.state.add('preload', Preload);\n    this.state.add('game', Game);\n\n    this.state.start('boot');\n\n  } // constructor\n\n} // Main\n\nwindow.onload = () => {\n  new Main();\n\n}; // window.onload\n","import Globals from './globals';\n\nexport default class Preload extends Phaser.State {\n  public preload ():void {\n    this.load.image('head', 'assets/images/head.png');\n    this.load.image('body', 'assets/images/body.png');\n    //this.load.image('wall', 'assets/images/wall.png');\n    this.load.image('food', 'assets/images/food.png');\n    this.load.image('tiles', 'assets/images/walls.png');\n\n  } // preload\n\n  public create ():void {\n    console.log(Globals.seed);\n    this.game.state.start('game');\n\n  } // create\n\n} // Preload\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYmFzZVNwcml0ZS50cyIsInNyYy9ib290LnRzIiwic3JjL2dhbWUudHMiLCJzcmMvZ2VuZXJhdG9yLnRzIiwic3JjL2dsb2JhbHMudHMiLCJzcmMvbWFpbi50cyIsInNyYy9wcmVsb2FkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7QUNBQSx3QkFBZ0MsQUFFaEM7O0lBQWdDOzs7QUFHOUIsd0JBQWEsQUFBZ0IsTUFBRSxBQUFZLE9BQUUsQUFBWSxPQUFFLEFBQWlCOzs7QUFDMUUsWUFBSSxBQUFRLFdBQWdCLFVBQU8sUUFBQyxBQUFPLFFBQUMsQUFBSyxPQUFFLEFBQUssQUFBQyxBQUFDLEFBQzFELEFBQUs7OzRIQUFDLEFBQUksTUFBRSxBQUFRLFNBQUMsQUFBQyxHQUFFLEFBQVEsU0FBQyxBQUFDLEdBQUUsQUFBVSxBQUFDLEFBQUM7O0FBQ2hELEFBQUksY0FBQyxBQUFNLE9BQUMsQUFBRyxJQUFDLEFBQUcsS0FBRSxBQUFHLEFBQUMsQUFBQztBQUMxQixBQUFJLGNBQUMsQUFBSSxLQUFDLEFBQUcsSUFBQyxBQUFRLEFBQUMsQUFBSSxBQUFDLEFBQUM7QUFDN0IsQUFBSSxjQUFDLEFBQWEsZ0JBQUcsSUFBSSxBQUFNLE9BQUMsQUFBSyxNQUFDLEFBQUssT0FBRSxBQUFLLEFBQUMsQUFBQyxBQUN0RDs7QUFBQyxBQUVELEFBQWM7Ozs7dUNBQUUsQUFBWSxPQUFFLEFBQVk7QUFDeEMsQUFBSSxpQkFBQyxBQUFZLGFBQUMsQUFBRyxJQUFDLEFBQUssT0FBRSxBQUFLLEFBQUMsQUFBQztBQUNwQyxnQkFBSSxBQUFRLFdBQUcsVUFBTyxRQUFDLEFBQU8sUUFBQyxBQUFLLE9BQUUsQUFBSyxBQUFDLEFBQUM7QUFDN0MsQUFBSSxpQkFBQyxBQUFRLFNBQUMsQUFBRyxJQUFDLEFBQVEsU0FBQyxBQUFDLEdBQUUsQUFBUSxTQUFDLEFBQUMsQUFBQyxB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LEdBQUUsQUFBUTtBQUM3QyxBQUFFLEFBQUMsZ0JBQUMsQUFBQyxJQUFHLEFBQUMsS0FBSSxBQUFDLEtBQUksQUFBQyxJQUFHLEFBQUMsS0FBSSxBQUFDLEtBQUksQUFBSSxLQUFDLEFBQUksS0FBQyxBQUFDLElBQUcsQUFBQyxBQUFDLEdBQUMsQUFBQyxJQUFHLEFBQUMsQUFBQyxNQUFJLEFBQUMsQUFBQyxHQUFDLEFBQUM7QUFDN0QsQUFBTSx1QkFBQyxBQUFLLEFBQUMsQUFDZjtBQUFDO0FBRUQsQUFBRSxBQUFDLGdCQUFDLEFBQUMsSUFBRyxBQUFDLEtBQUksQUFBQyxLQUFJLEFBQUksS0FBQyxBQUFJLEtBQUMsQUFBQyxBQUFDLEdBQUMsQUFBQyxJQUFHLEFBQUMsQUFBQyxNQUFJLEFBQUMsQUFBQyxHQUFDLEFBQUM7QUFDM0MsQUFBTSx1QkFBQyxBQUFLLEFBQUMsQUFDZjtBQUFDO0FBRUQsQUFBRSxBQUFDLGdCQUFDLEFBQUMsSUFBRyxBQUFDLEtBQUksQUFBQyxLQUFJLEFBQUMsSUFBRyxBQUFDLElBQUcsQUFBSSxLQUFDLEFBQU8sV0FBSSxBQUFJLEtBQUMsQUFBSSxLQUFDLEFBQUMsSUFBRyxBQUFDLEFBQUMsR0FBQyxBQUFDLElBQUcsQUFBQyxBQUFDLE1BQUksQUFBQyxBQUFDLEdBQUMsQUFBQztBQUN2RSxBQUFNLHVCQUFDLEFBQUssQUFBQyxBQUNmO0FBQUM7QUFFRCxBQUFFLEFBQUMsZ0JBQUMsQUFBQyxJQUFHLEFBQUMsSUFBRyxBQUFJLEtBQUMsQUFBTyxXQUFJLEFBQUksS0FBQyxBQUFJLEtBQUMsQUFBQyxJQUFHLEFBQUMsQUFBQyxHQUFDLEFBQUMsQUFBQyxNQUFJLEFBQUMsQUFBQyxHQUFDLEFBQUM7QUFDckQsQUFBTSx1QkFBQyxBQUFLLEFBQUMsQUFDZjtBQUFDO0FBRUQsQUFBRSxBQUFDLGdCQUFDLEFBQUMsSUFBRyxBQUFDLElBQUcsQUFBSSxLQUFDLEFBQU0sVUFBSSxBQUFDLElBQUcsQUFBQyxJQUFHLEFBQUksS0FBQyxBQUFPLFdBQUksQUFBSSxLQUFDLEFBQUksS0FBQyxBQUFDLElBQUcsQUFBQyxBQUFDLEdBQUMsQUFBQyxJQUFHLEFBQUMsQUFBQyxNQUFJLEFBQUMsQUFBQyxHQUFDLEFBQUM7QUFDaEYsQUFBTSx1QkFBQyxBQUFLLEFBQUMsQUFDZjtBQUFDO0FBRUQsQUFBRSxBQUFDLGdCQUFDLEFBQUMsSUFBRyxBQUFDLElBQUcsQUFBSSxLQUFDLEFBQU0sVUFBSSxBQUFJLEtBQUMsQUFBSSxLQUFDLEFBQUMsQUFBQyxHQUFDLEFBQUMsSUFBRyxBQUFDLEFBQUMsTUFBSSxBQUFDLEFBQUMsR0FBQyxBQUFDO0FBQ3BELEFBQU0sdUJBQUMsQUFBSyxBQUFDLEFBQ2Y7QUFBQztBQUVELEFBQUUsQUFBQyxnQkFBQyxBQUFDLElBQUcsQUFBQyxJQUFHLEFBQUksS0FBQyxBQUFNLFVBQUksQUFBQyxJQUFHLEFBQUMsS0FBSSxBQUFDLEtBQUksQUFBSSxLQUFDLEFBQUksS0FBQyxBQUFDLElBQUcsQUFBQyxBQUFDLEdBQUMsQUFBQyxJQUFHLEFBQUMsQUFBQyxNQUFJLEFBQUMsQUFBQyxHQUFDLEFBQUM7QUFDdEUsQUFBTSx1QkFBQyxBQUFLLEFBQUMsQUFDZjtBQUFDO0FBRUQsQUFBRSxBQUFDLGdCQUFDLEFBQUMsSUFBRyxBQUFDLEtBQUksQUFBQyxLQUFJLEFBQUksS0FBQyxBQUFJLEtBQUMsQUFBQyxJQUFHLEFBQUMsQUFBQyxHQUFDLEFBQUMsQUFBQyxNQUFJLEFBQUMsQUFBQyxHQUFDLEFBQUM7QUFDM0MsQUFBTSx1QkFBQyxBQUFLLEFBQUMsQUFDZjtBQUFDO0FBRUQsQUFBTSxtQkFBQyxBQUFJLEFBQUMsQUFFZDtBQUFDLFVBQUMsQUFBdUIsQUFFakIsQUFBaUI7Ozs7O0FBQ3ZCLGdCQUFJLEFBQWEsZ0JBQWtCLEFBQUUsQUFBQztBQUN0QyxBQUFHLEFBQUMsaUJBQUMsSUFBSSxBQUFDLElBQUcsQUFBQyxHQUFFLEFBQUMsSUFBRyxBQUFJLEtBQUMsQUFBTyxTQUFFLEFBQUMsQUFBRSxLQUFFLEFBQUM7QUFDdEMsQUFBRyxBQUFDLHFCQUFDLElBQUksQUFB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ZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBHbG9iYWxzIGZyb20gJy4vZ2xvYmFscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VTcHJpdGUgZXh0ZW5kcyBQaGFzZXIuU3ByaXRlIHtcbiAgcHJpdmF0ZSBfZ3JpZFBvc2l0aW9uOlBoYXNlci5Qb2ludDtcblxuICBjb25zdHJ1Y3RvciAoZ2FtZTpQaGFzZXIuR2FtZSwgZ3JpZFg6bnVtYmVyLCBncmlkWTpudW1iZXIsIHNwcml0ZU5hbWU6c3RyaW5nICkge1xuICAgIGxldCB3b3JsZFBvczpQaGFzZXIuUG9pbnQgPSBHbG9iYWxzLnRvV29ybGQoZ3JpZFgsIGdyaWRZKTtcbiAgICBzdXBlcihnYW1lLCB3b3JsZFBvcy54LCB3b3JsZFBvcy55LCBzcHJpdGVOYW1lKTtcbiAgICB0aGlzLmFuY2hvci5zZXQoMC41LCAwLjUpO1xuICAgIHRoaXMuZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XG4gICAgdGhpcy5fZ3JpZFBvc2l0aW9uID0gbmV3IFBoYXNlci5Qb2ludChncmlkWCwgZ3JpZFkpO1xuICB9XG5cbiAgdXBkYXRlUG9zaXRpb24gKGdyaWRYOm51bWJlciwgZ3JpZFk6bnVtYmVyKTp2b2lkIHtcbiAgICB0aGlzLmdyaWRQb3NpdGlvbi5zZXQoZ3JpZFgsIGdyaWRZKTtcbiAgICBsZXQgd29ybGRQb3MgPSBHbG9iYWxzLnRvV29ybGQoZ3JpZFgsIGdyaWRZKTtcbiAgICB0aGlzLnBvc2l0aW9uLnNldCh3b3JsZFBvcy54LCB3b3JsZFBvcy55KTtcbiAgfVxuICBnZXQgZ3JpZFBvc2l0aW9uICgpOlBoYXNlci5Qb2ludCB7XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRQb3NpdGlvbjtcbiAgfVxufVxuIiwiaW1wb3J0IEdsb2JhbHMgZnJvbSAnLi9nbG9iYWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9vdCBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gIHB1YmxpYyBwcmVsb2FkICgpOnZvaWQge1xuICAgIHRoaXMuc3RhZ2UuZGlzYWJsZVZpc2liaWxpdHlDaGFuZ2UgPSBmYWxzZTtcbiAgICB0aGlzLnN0YWdlLnNtb290aGVkID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xuICAgIHRoaXMuc2NhbGUucGFnZUFsaWduVmVydGljYWxseSA9IHRydWU7XG5cbiAgICBQaGFzZXIuQ2FudmFzLnNldEltYWdlUmVuZGVyaW5nQ3Jpc3AodGhpcy5nYW1lLmNhbnZhcyk7XG5cbiAgICB0aGlzLnRpbWUuYWR2YW5jZWRUaW1pbmcgPSB0cnVlO1xuXG4gICAgR2xvYmFscy5zZWVkID0gdGhpcy5ybmQuYmV0d2VlbigwLCA5OTk5OTk5OTk5KTtcbiAgICB0aGlzLnJuZC5zb3coW0dsb2JhbHMuc2VlZC50b1N0cmluZygpXSk7XG5cbiAgfSAvLyBwcmVsb2FkXG4gIFxuICBwdWJsaWMgY3JlYXRlICgpOnZvaWQge1xuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgncHJlbG9hZCcpO1xuXG4gIH0gLy8gY3JlYXRlXG5cbn0gLy8gQm9vdFxuIiwiaW1wb3J0IEdsb2JhbHMgZnJvbSAnLi9nbG9iYWxzJztcbmltcG9ydCBCYXNlU3ByaXRlIGZyb20gJy4vYmFzZVNwcml0ZSc7XG5pbXBvcnQgR2VuZXJhdG9yIGZyb20gJy4vZ2VuZXJhdG9yJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gIHByaXZhdGUgX3NuYWtlOkJhc2VTcHJpdGU7XG4gIHByaXZhdGUgX3RpbWVyOm51bWJlciA9IDA7XG4gIHByaXZhdGUgX2RlbGF5Om51bWJlciA9IDI1MDtcblxuICBwcml2YXRlIF9sZWZ0S2V5OlBoYXNlci5LZXk7XG4gIHByaXZhdGUgX3JpZ2h0S2V5OlBoYXNlci5LZXk7XG4gIHByaXZhdGUgX3VwS2V5OlBoYXNlci5LZXk7XG4gIHByaXZhdGUgX2Rvd25LZXk6UGhhc2VyLktleTtcblxuICBwcml2YXRlIF9kZXNpcmVkUm90YXRpb246bnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfZGVzaXJlZERpcmVjdGlvbjpQaGFzZXIuUG9pbnQgPSBuZXcgUGhhc2VyLlBvaW50KDEsIDApO1xuICBwcml2YXRlIF9jdXJyZW50RGlyZWN0aW9uOlBoYXNlci5Qb2ludCA9IG5ldyBQaGFzZXIuUG9pbnQoMSwgMCk7XG5cbiAgcHJpdmF0ZSBfYm9keUdyb3VwOlBoYXNlci5Hcm91cDtcbiAgcHJpdmF0ZSBfYm9keTpCYXNlU3ByaXRlW107XG4gIHByaXZhdGUgX2Zvb2Q6QmFzZVNwcml0ZTtcblxuICBwcml2YXRlIF9tYXA6UGhhc2VyLlRpbGVtYXA7XG4gIHByaXZhdGUgX21hcExheWVyOlBoYXNlci5UaWxlbWFwTGF5ZXI7XG5cbiAgcHVibGljIGNyZWF0ZSAoKTp2b2lkIHtcblxuICAgIGxldCBnZW46R2VuZXJhdG9yID0gbmV3IEdlbmVyYXRvcih0aGlzLmdhbWUsIDQwLCAzMCk7XG4gICAgbGV0IG1hcENTVjpzdHJpbmcgPSBnZW4uYnVpbGRNYXAoMjAsIDQsIDgsIDQsIDgpO1xuICAgIHRoaXMubG9hZC50aWxlbWFwKCdtYXAnLCBudWxsLCBtYXBDU1YsIFBoYXNlci5UaWxlbWFwLkNTVik7XG4gICAgdGhpcy5fbWFwID0gdGhpcy5hZGQudGlsZW1hcCgnbWFwJywgR2xvYmFscy5USUxFU0laRSwgR2xvYmFscy5USUxFU0laRSk7XG4gICAgdGhpcy5fbWFwLmFkZFRpbGVzZXRJbWFnZSgndGlsZXMnKTtcblxuICAgIHRoaXMuX21hcExheWVyID0gdGhpcy5fbWFwLmNyZWF0ZUxheWVyKDApO1xuICAgIHRoaXMuX21hcExheWVyLnJlc2l6ZVdvcmxkKCk7XG5cbiAgICB0aGlzLmNyZWF0ZVNuYWtlKCk7XG5cbiAgICB0aGlzLl9mb29kID0gbmV3IEJhc2VTcHJpdGUodGhpcy5nYW1lLCAwLCAwLCAnZm9vZCcpO1xuICAgIHRoaXMudXBkYXRlRm9vZCgpO1xuXG4gICAgdGhpcy5nYW1lLmNhbWVyYS5mb2xsb3codGhpcy5fc25ha2UsIFBoYXNlci5DYW1lcmEuRk9MTE9XX1RPUERPV05fVElHSFQpO1xuXG4gICAgdGhpcy5fbGVmdEtleSA9IHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLktleWJvYXJkLkxFRlQpO1xuICAgIHRoaXMuX3JpZ2h0S2V5ID0gdGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuS2V5Ym9hcmQuUklHSFQpO1xuICAgIHRoaXMuX3VwS2V5ID0gdGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuS2V5Ym9hcmQuVVApO1xuICAgIHRoaXMuX2Rvd25LZXkgPSB0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5LZXlib2FyZC5ET1dOKTtcblxuICB9IC8vIGNyZWF0ZVxuXG4gIHB1YmxpYyB1cGRhdGUgKCk6dm9pZCB7XG4gICAgaWYgKHRoaXMuX2xlZnRLZXkuanVzdERvd24pIHtcbiAgICAgIHRoaXMuX2Rlc2lyZWREaXJlY3Rpb24uc2V0KC0xLCAwKTtcbiAgICAgIHRoaXMuX2Rlc2lyZWRSb3RhdGlvbiA9IDE4MDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3JpZ2h0S2V5Lmp1c3REb3duKSB7XG4gICAgICB0aGlzLl9kZXNpcmVkRGlyZWN0aW9uLnNldCgxLCAwKTtcbiAgICAgIHRoaXMuX2Rlc2lyZWRSb3RhdGlvbiA9IDA7XG4gICAgfSBlbHNlIGlmICh0aGlzLl91cEtleS5qdXN0RG93bikge1xuICAgICAgdGhpcy5fZGVzaXJlZERpcmVjdGlvbi5zZXQoMCwgLTEpO1xuICAgICAgdGhpcy5fZGVzaXJlZFJvdGF0aW9uID0gMjcwO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fZG93bktleS5qdXN0RG93bikge1xuICAgICAgdGhpcy5fZGVzaXJlZERpcmVjdGlvbi5zZXQoMCwgMSk7XG4gICAgICB0aGlzLl9kZXNpcmVkUm90YXRpb24gPSA5MDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGltZXIgPCB0aGlzLl9kZWxheSkge1xuICAgICAgdGhpcy5fdGltZXIgKz0gdGhpcy50aW1lLmVsYXBzZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3RpbWVyID0gMDtcbiAgICAgIHRoaXMudXBkYXRlU25ha2UoKTtcbiAgICB9XG4gICAgXG4gIH0gLy8gdXBkYXRlXG5cbiAgcHVibGljIHJlbmRlciAoKTp2b2lkIHtcbiAgICB0aGlzLmdhbWUuZGVidWcudGV4dCh0aGlzLnRpbWUuZnBzLnRvU3RyaW5nKCkgfHwgJy0tJywgMywgMTQsICcjMDBmZjAwJyk7XG5cbiAgfSAvLyByZW5kZXJcblxuICBwcml2YXRlIGNyZWF0ZVNuYWtlICgpOnZvaWQge1xuICAgIGxldCBzbmFrZVBvczpQaGFzZXIuUG9pbnQgPSBuZXcgUGhhc2VyLlBvaW50KCk7XG4gICAgbGV0IGZvdW5kUG9zOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBsZXQgcm5kWDpudW1iZXI7XG4gICAgbGV0IHJuZFk6bnVtYmVyO1xuICAgIHdoaWxlICghZm91bmRQb3MpIHtcbiAgICAgIHJuZFggPSB0aGlzLmdhbWUucm5kLmJldHdlZW4oMCwgdGhpcy5fbWFwLndpZHRoIC0gMSk7XG4gICAgICBybmRZID0gdGhpcy5nYW1lLnJuZC5iZXR3ZWVuKDAsIHRoaXMuX21hcC5oZWlnaHQgLSAxKTtcbiAgICAgIFxuICAgICAgaWYgKChybmRYIC0gMykgPj0gMCAmJiAocm5kWCArIDMpIDwgdGhpcy5fbWFwLndpZHRoIC0gMSkge1xuICAgICAgICBmb3VuZFBvcyA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAocm5kWCAtIDMpOyBpIDw9IChybmRYICsgMyk7IGkrKykge1xuICAgICAgICAgIGlmICh0aGlzLl9tYXAuZ2V0VGlsZShpLCBybmRZLCAwKS5pbmRleCAhPSAwKSB7XG4gICAgICAgICAgICBmb3VuZFBvcyA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3NuYWtlID0gbmV3IEJhc2VTcHJpdGUodGhpcy5nYW1lLCBybmRYLCBybmRZLCAnaGVhZCcpO1xuICAgIHRoaXMuX2JvZHlHcm91cCA9IHRoaXMuYWRkLmdyb3VwKCk7XG4gICAgdGhpcy5fYm9keUdyb3VwLmNsYXNzVHlwZSA9IEJhc2VTcHJpdGU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgbGV0IHBhcnQ6QmFzZVNwcml0ZSA9IG5ldyBCYXNlU3ByaXRlKHRoaXMuZ2FtZSwgMCwgMCwgJ2JvZHknKTtcbiAgICAgIHBhcnQua2lsbCgpO1xuICAgICAgdGhpcy5fYm9keUdyb3VwLmFkZChwYXJ0KTtcbiAgICB9XG5cbiAgICBsZXQgc25ha2VHcmlkUG9zOlBoYXNlci5Qb2ludCA9IHRoaXMuX3NuYWtlLmdyaWRQb3NpdGlvbjtcbiAgICB0aGlzLl9ib2R5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCAzOyBpKyspIHtcbiAgICAgIGxldCBib2R5UGFydDpCYXNlU3ByaXRlID0gdGhpcy5fYm9keUdyb3VwLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcbiAgICAgIGJvZHlQYXJ0LnJldml2ZSgpO1xuICAgICAgYm9keVBhcnQudXBkYXRlUG9zaXRpb24oc25ha2VHcmlkUG9zLnggLSBpLCBzbmFrZUdyaWRQb3MueSk7XG4gICAgICB0aGlzLl9ib2R5LnB1c2goYm9keVBhcnQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU25ha2UgKCk6dm9pZCB7XG4gICAgbGV0IGRpZmZlcmVuY2UgPSBQaGFzZXIuUG9pbnQuYWRkKHRoaXMuX2Rlc2lyZWREaXJlY3Rpb24sIHRoaXMuX2N1cnJlbnREaXJlY3Rpb24pO1xuICAgIGlmIChkaWZmZXJlbmNlLnggIT0gMCB8fCBkaWZmZXJlbmNlLnkgIT0gMCkge1xuICAgICAgdGhpcy5fY3VycmVudERpcmVjdGlvbiA9IHRoaXMuX2Rlc2lyZWREaXJlY3Rpb24uY2xvbmUoKTtcbiAgICAgIHRoaXMuX3NuYWtlLmFuZ2xlID0gdGhpcy5fZGVzaXJlZFJvdGF0aW9uO1xuICAgIH1cblxuICAgIGxldCBvbGRQb3M6UGhhc2VyLlBvaW50ID0gdGhpcy5fc25ha2UuZ3JpZFBvc2l0aW9uLmNsb25lKCk7XG5cbiAgICBsZXQgbmV3WDpudW1iZXIgPSBvbGRQb3MueCArIHRoaXMuX2N1cnJlbnREaXJlY3Rpb24ueDtcbiAgICBsZXQgbmV3WTpudW1iZXIgPSBvbGRQb3MueSArIHRoaXMuX2N1cnJlbnREaXJlY3Rpb24ueTtcbiAgICBpZiAodGhpcy5fbWFwLmdldFRpbGUobmV3WCwgbmV3WSwgMCkuaW5kZXggIT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBoaXRTZWxmOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2JvZHkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBib2R5OkJhc2VTcHJpdGUgPSB0aGlzLl9ib2R5W2ldO1xuICAgICAgaWYgKGJvZHkuZ3JpZFBvc2l0aW9uLnggPT0gbmV3WCAmJiBib2R5LmdyaWRQb3NpdGlvbi55ID09IG5ld1kpIHtcbiAgICAgICAgaGl0U2VsZiA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0U2VsZikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NuYWtlLnVwZGF0ZVBvc2l0aW9uKG5ld1gsIG5ld1kpO1xuXG4gICAgaWYgKHRoaXMuX2Zvb2QuZ3JpZFBvc2l0aW9uLmVxdWFscyh0aGlzLl9zbmFrZS5ncmlkUG9zaXRpb24pKSB7XG4gICAgICB2YXIgbmV3UGFydDpCYXNlU3ByaXRlID0gdGhpcy5fYm9keUdyb3VwLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcbiAgICAgIG5ld1BhcnQucmV2aXZlKCk7XG4gICAgICBuZXdQYXJ0LnVwZGF0ZVBvc2l0aW9uKG9sZFBvcy54LCBvbGRQb3MueSk7XG4gICAgICB0aGlzLl9ib2R5LnVuc2hpZnQobmV3UGFydCk7XG5cbiAgICAgIHRoaXMudXBkYXRlRm9vZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGFzdEJvZHlQYXJ0OkJhc2VTcHJpdGUgPSB0aGlzLl9ib2R5LnBvcCgpO1xuICAgICAgbGFzdEJvZHlQYXJ0LnVwZGF0ZVBvc2l0aW9uKG9sZFBvcy54LCBvbGRQb3MueSk7XG4gICAgICB0aGlzLl9ib2R5LnVuc2hpZnQobGFzdEJvZHlQYXJ0KTtcbiAgICB9XG5cbiAgfSAvLyB1cGRhdGVTbmFrZVxuXG4gIHByaXZhdGUgdXBkYXRlRm9vZCAoKTp2b2lkIHtcbiAgICBsZXQgZW1wdHlQb3NpdGlvbjpib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IHJuZFg6bnVtYmVyO1xuICAgIGxldCBybmRZOm51bWJlcjtcbiAgICB3aGlsZSAoIWVtcHR5UG9zaXRpb24pIHtcbiAgICAgIHJuZFggPSB0aGlzLmdhbWUucm5kLmJldHdlZW4oMCwgdGhpcy5fbWFwLndpZHRoIC0gMSk7XG4gICAgICBybmRZID0gdGhpcy5nYW1lLnJuZC5iZXR3ZWVuKDAsIHRoaXMuX21hcC5oZWlnaHQgLSAxKTtcblxuICAgICAgaWYgKHRoaXMuX21hcC5nZXRUaWxlKHJuZFgsIHJuZFksIDApLmluZGV4ID09IDApIHtcbiAgICAgICAgZW1wdHlQb3NpdGlvbiA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9zbmFrZS5ncmlkUG9zaXRpb24ueCA9PSBybmRYICYmIHRoaXMuX3NuYWtlLmdyaWRQb3NpdGlvbi55ID09IHJuZFkpIHtcbiAgICAgICAgICBlbXB0eVBvc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9ib2R5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGJvZHk6QmFzZVNwcml0ZSA9IHRoaXMuX2JvZHlbaV07XG4gICAgICAgICAgaWYgKGJvZHkuZ3JpZFBvc2l0aW9uLnggPT0gcm5kWCAmJiBib2R5LmdyaWRQb3NpdGlvbi55ID09IHJuZFkpIHtcbiAgICAgICAgICAgIGVtcHR5UG9zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2Zvb2QudXBkYXRlUG9zaXRpb24ocm5kWCwgcm5kWSk7XG4gIH0gLy8gdXBkYXRlRm9vZFxuXG59IC8vIEdhbWVcbiIsIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHZW5lcmF0b3Ige1xuICBwcml2YXRlIF93aWR0aDpudW1iZXI7XG4gIHByaXZhdGUgX2hlaWdodDpudW1iZXI7XG4gIHByaXZhdGUgX2dhbWU6UGhhc2VyLkdhbWU7XG5cbiAgcHJpdmF0ZSBfbWFwOm51bWJlcltdW107XG5cbiAgY29uc3RydWN0b3IoZ2FtZTpQaGFzZXIuR2FtZSwgd2lkdGg6bnVtYmVyLCBoZWlnaHQ6bnVtYmVyKSB7XG4gICAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fbWFwID0gW107XG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICBsZXQgcm93Om51bWJlcltdID0gW107XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgcm93LnB1c2goMSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9tYXAucHVzaChyb3cpO1xuICAgIH1cblxuICB9IC8vIGNvbnN0cnVjdG9yXG5cbiAgcHVibGljIGJ1aWxkTWFwIChuclJvb21zOm51bWJlciwgbWluU2l6ZTpudW1iZXIsIG1heFNpemU6bnVtYmVyLCBtaW5PdmVybGFwOm51bWJlciwgbWF4T3ZlcmxhcDpudW1iZXIpOnN0cmluZyB7XG4gICAgbGV0IHJvb206UGhhc2VyLlJlY3RhbmdsZSA9IHRoaXMuZ2V0Um5kUm9vbShtaW5TaXplLCBtYXhTaXplLCB0cnVlKTtcbiAgICB0aGlzLmNyZWF0ZVJvb20ocm9vbSk7XG5cbiAgICBsZXQgdG90YWxSb29tczpudW1iZXIgPSAxO1xuXG4gICAgbGV0IHRvdGFsVHJpZXM6bnVtYmVyID0gMzAwO1xuICAgIGxldCB0aW1lc1RyaWVkOm51bWJlciA9IDA7XG4gICAgbGV0IGZvdW5kUGxhY2U6Ym9vbGVhbiA9IGZhbHNlO1xuICAgIHdoaWxlICh0b3RhbFJvb21zIDwgbnJSb29tcykge1xuICAgICAgdGltZXNUcmllZCA9IDA7XG4gICAgICBmb3VuZFBsYWNlID0gZmFsc2U7XG4gICAgICB3aGlsZSghZm91bmRQbGFjZSAmJiB0aW1lc1RyaWVkIDwgdG90YWxUcmllcykge1xuICAgICAgICByb29tID0gdGhpcy5nZXRSbmRSb29tKG1pblNpemUsIG1heFNpemUsIGZhbHNlKTtcbiAgICAgICAgbGV0IG92ZXJsYXA6bnVtYmVyID0gdGhpcy5jb3VudFRpbGVzKHJvb20pO1xuICAgICAgICBpZiAob3ZlcmxhcCA+PSBtaW5PdmVybGFwICYmIG92ZXJsYXAgPD0gbWF4T3ZlcmxhcCkge1xuICAgICAgICAgIGZvdW5kUGxhY2UgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuY3JlYXRlUm9vbShyb29tKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lc1RyaWVkKys7XG4gICAgICB9XG4gICAgICB0b3RhbFJvb21zKys7XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmVEb3VibGVXYWxscygpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q1NWKCk7XG5cbiAgfSAvLyBidWlsZE1hcFxuXG4gIHByaXZhdGUgZ2V0Um5kUm9vbSAobWluU2l6ZTpudW1iZXIsIG1heFNpemU6bnVtYmVyLCBmaXJzdFJvb206Ym9vbGVhbik6UGhhc2VyLlJlY3RhbmdsZSB7XG4gICAgbGV0IHJvb21XaWR0aDpudW1iZXIgPSB0aGlzLl9nYW1lLnJuZC5iZXR3ZWVuKG1pblNpemUsIG1heFNpemUpO1xuICAgIGxldCByb29tSGVpZ2h0Om51bWJlciA9IHRoaXMuX2dhbWUucm5kLmJldHdlZW4obWluU2l6ZSwgbWF4U2l6ZSk7XG4gICAgbGV0IHg6bnVtYmVyO1xuICAgIGxldCB5Om51bWJlcjtcbiAgICBpZiAoZmlyc3RSb29tKSB7XG4gICAgICB4ID0gTWF0aC5mbG9vcih0aGlzLl93aWR0aCAqIDAuNSAtIHJvb21XaWR0aCAqIDAuNSk7XG4gICAgICB5ID0gTWF0aC5mbG9vcih0aGlzLl9oZWlnaHQgKiAwLjUgLSByb29tSGVpZ2h0ICogMC41KTtcbiAgICB9IGVsc2Uge1xuICAgICAgeCA9IHRoaXMuX2dhbWUucm5kLmJldHdlZW4oMSwgdGhpcy5fd2lkdGggLSByb29tV2lkdGggLSAxKTtcbiAgICAgIHkgPSB0aGlzLl9nYW1lLnJuZC5iZXR3ZWVuKDEsIHRoaXMuX2hlaWdodCAtIHJvb21IZWlnaHQgLSAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFBoYXNlci5SZWN0YW5nbGUoeCwgeSwgcm9vbVdpZHRoLCByb29tSGVpZ2h0KTtcblxuICB9IC8vIGdldFJuZFJvb21cblxuICBwcml2YXRlIGNvdW50VGlsZXMgKHJvb206UGhhc2VyLlJlY3RhbmdsZSk6bnVtYmVyIHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIGZvciAobGV0IHkgPSByb29tLnk7IHkgPCByb29tLnkgKyByb29tLmhlaWdodDsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gcm9vbS54OyB4IDwgcm9vbS54ICsgcm9vbS53aWR0aDsgeCsrKSB7XG4gICAgICAgIGlmICh0aGlzLl9tYXBbeV1beF0gPT0gMCkge1xuICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY291bnQ7XG5cbiAgfSAvLyBjb3VudFRpbGVzXG5cbiAgcHJpdmF0ZSBjcmVhdGVSb29tIChyb29tOlBoYXNlci5SZWN0YW5nbGUpOnZvaWQge1xuICAgIGZvciAobGV0IHkgPSByb29tLnk7IHkgPCByb29tLnkgKyByb29tLmhlaWdodDsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gcm9vbS54OyB4IDwgcm9vbS54ICsgcm9vbS53aWR0aDsgeCsrKSB7XG4gICAgICAgIHRoaXMuX21hcFt5XVt4XSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9IC8vIGNyZWF0ZVJvb21cblxuICBwcml2YXRlIGFsbE5laWdib3JzQXJlV2FsbHMgKHg6bnVtYmVyLCB5Om51bWJlcik6Ym9vbGVhbiB7XG4gICAgaWYgKHggLSAxID49IDAgJiYgeSAtIDEgPj0gMCAmJiB0aGlzLl9tYXBbeSAtIDFdW3ggLSAxXSA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHggLSAxID49IDAgJiYgdGhpcy5fbWFwW3ldW3ggLSAxXSA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHggLSAxID49IDAgJiYgeSArIDEgPCB0aGlzLl9oZWlnaHQgJiYgdGhpcy5fbWFwW3kgKyAxXVt4IC0gMV0gPT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh5ICsgMSA8IHRoaXMuX2hlaWdodCAmJiB0aGlzLl9tYXBbeSArIDFdW3hdID09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoeCArIDEgPCB0aGlzLl93aWR0aCAmJiB5ICsgMSA8IHRoaXMuX2hlaWdodCAmJiB0aGlzLl9tYXBbeSArIDFdW3ggKyAxXSA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHggKyAxIDwgdGhpcy5fd2lkdGggJiYgdGhpcy5fbWFwW3ldW3ggKyAxXSA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHggKyAxIDwgdGhpcy5fd2lkdGggJiYgeSAtIDEgPj0gMCAmJiB0aGlzLl9tYXBbeSAtIDFdW3ggKyAxXSA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHkgLSAxID49IDAgJiYgdGhpcy5fbWFwW3kgLSAxXVt4XSA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfSAvLyBhbGxOZWlnaGJvcnNBcmVXYWxsc1xuXG4gIHByaXZhdGUgcmVtb3ZlRG91YmxlV2FsbHMgKCk6dm9pZCB7XG4gICAgbGV0IHdhbGxzVG9SZW1vdmU6UGhhc2VyLlBvaW50W10gPSBbXTtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuX2hlaWdodDsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuX3dpZHRoOyB4KyspIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsTmVpZ2JvcnNBcmVXYWxscyh4LCB5KSkge1xuICAgICAgICAgIHdhbGxzVG9SZW1vdmUucHVzaChuZXcgUGhhc2VyLlBvaW50KHgsIHkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2FsbHNUb1JlbW92ZS5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHdhbGxQb3M6UGhhc2VyLlBvaW50ID0gd2FsbHNUb1JlbW92ZVtpXTtcbiAgICAgIHRoaXMuX21hcFt3YWxsUG9zLnldW3dhbGxQb3MueF0gPSAyO1xuICAgIH1cblxuICB9IC8vIHJlbXZvZURvdWJsZVdhbGxzXG5cbiAgcHJpdmF0ZSBnZXRDU1YgKCk6c3RyaW5nIHtcbiAgICBsZXQgY3N2U3RyaW5nOnN0cmluZyA9ICcnO1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5faGVpZ2h0OyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5fd2lkdGg7IHgrKykge1xuICAgICAgICBjc3ZTdHJpbmcgKz0gdGhpcy5fbWFwW3ldW3hdLnRvU3RyaW5nKCk7XG4gICAgICAgIGNzdlN0cmluZyArPSAnLCc7XG4gICAgICB9XG4gICAgICBjc3ZTdHJpbmcgPSBjc3ZTdHJpbmcucmVwbGFjZSgvLFxccyokLywgJycpO1xuICAgICAgY3N2U3RyaW5nICs9ICdcXG4nO1xuICAgIH1cblxuICAgIHJldHVybiBjc3ZTdHJpbmc7XG5cbiAgfSAvLyBnZXRDU1ZcblxufSAvLyBHZW5lcmF0b3JcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdsb2JhbHMge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFRJTEVTSVpFOm51bWJlciA9IDIwO1xuICBcbiAgcHVibGljIHN0YXRpYyBzZWVkOm51bWJlciA9IDA7XG5cbiAgcHVibGljIHN0YXRpYyB0b0dyaWQgKHg6bnVtYmVyLCB5Om51bWJlcik6UGhhc2VyLlBvaW50IHtcbiAgICByZXR1cm4gbmV3IFBoYXNlci5Qb2ludChNYXRoLmZsb29yKHggLyBHbG9iYWxzLlRJTEVTSVpFKSwgTWF0aC5mbG9vcih5IC8gR2xvYmFscy5USUxFU0laRSkpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyB0b1dvcmxkICh4Om51bWJlciwgeTpudW1iZXIpOlBoYXNlci5Qb2ludCB7XG4gICAgcmV0dXJuIG5ldyBQaGFzZXIuUG9pbnQoeCAqIEdsb2JhbHMuVElMRVNJWkUgKyBHbG9iYWxzLlRJTEVTSVpFICogMC41LFxuICAgICAgeSAqIEdsb2JhbHMuVElMRVNJWkUgKyBHbG9iYWxzLlRJTEVTSVpFICogMC41KTtcbiAgfVxufVxuIiwiXG5pbXBvcnQgQm9vdCBmcm9tICcuL2Jvb3QnO1xuaW1wb3J0IFByZWxvYWQgZnJvbSAnLi9wcmVsb2FkJztcbmltcG9ydCBHYW1lIGZyb20gJy4vZ2FtZSc7XG5cbmNsYXNzIE1haW4gZXh0ZW5kcyBQaGFzZXIuR2FtZSB7XG4gIHB1YmxpYyB0ZXN0OiAndGVzdGluZyc7XG5cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHN1cGVyKDY0MCwgNDgwLCBQaGFzZXIuQVVUTywgJ2NvbnRhaW5lcicsIG51bGwpO1xuXG4gICAgdGhpcy5zdGF0ZS5hZGQoJ2Jvb3QnLCBCb290KTtcbiAgICB0aGlzLnN0YXRlLmFkZCgncHJlbG9hZCcsIFByZWxvYWQpO1xuICAgIHRoaXMuc3RhdGUuYWRkKCdnYW1lJywgR2FtZSk7XG5cbiAgICB0aGlzLnN0YXRlLnN0YXJ0KCdib290Jyk7XG5cbiAgfSAvLyBjb25zdHJ1Y3RvclxuXG59IC8vIE1haW5cblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgbmV3IE1haW4oKTtcblxufTsgLy8gd2luZG93Lm9ubG9hZFxuIiwiaW1wb3J0IEdsb2JhbHMgZnJvbSAnLi9nbG9iYWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlbG9hZCBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gIHB1YmxpYyBwcmVsb2FkICgpOnZvaWQge1xuICAgIHRoaXMubG9hZC5pbWFnZSgnaGVhZCcsICdhc3NldHMvaW1hZ2VzL2hlYWQucG5nJyk7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdib2R5JywgJ2Fzc2V0cy9pbWFnZXMvYm9keS5wbmcnKTtcbiAgICAvL3RoaXMubG9hZC5pbWFnZSgnd2FsbCcsICdhc3NldHMvaW1hZ2VzL3dhbGwucG5nJyk7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdmb29kJywgJ2Fzc2V0cy9pbWFnZXMvZm9vZC5wbmcnKTtcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGVzJywgJ2Fzc2V0cy9pbWFnZXMvd2FsbHMucG5nJyk7XG5cbiAgfSAvLyBwcmVsb2FkXG5cbiAgcHVibGljIGNyZWF0ZSAoKTp2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhHbG9iYWxzLnNlZWQpO1xuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnZ2FtZScpO1xuXG4gIH0gLy8gY3JlYXRlXG5cbn0gLy8gUHJlbG9hZFxuIl19"}